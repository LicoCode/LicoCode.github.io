import{preloadImages}from"./preload.js";import{updateDayNightstate}from"./daynight.js";import{updateStatus}from"./status.js";import{updateWeatherEffects}from"./weather.js";import{fetchLocation,fetchAddressByIP,fetchWeatherByCoordinates}from"./weatherService.js";async function init(){try{const e=await getCoordinates(),t=await getWeatherInfo(e);t&&(updateStatus(t.time),updateDayNightstate(t.time,t.sunrise,t.sunset),updateWeatherEffects(t.weatherCode,t.windSpeed,t.windDirection))}catch(e){console.error("Initialization failed:",e),alert("无法加载天气信息，请检查网络连接或稍后重试。")}}async function getCoordinates(){return await fetchAddressByIP()}async function getWeatherInfo(e){return e?await fetchWeatherByCoordinates(e.longitude,e.latitude):null}document.addEventListener("DOMContentLoaded",(()=>{preloadImages("./assets/images/zzz.jpg","./assets/images/aaa.jpg","./assets/images/eee.jpg"),setTimeout((()=>{init(),setInterval(init,18e5)}),1e3)}));