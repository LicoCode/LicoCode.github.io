export function updateWeatherEffects(t,e,n){const i=getWindDirection(n);if(isRain(t)){let n=getRainStrength(t);startRainEffect(n.rainCount,n.rainSize,n.rainSpeed,e,i)}else if(isSnow(t)){let n=getSnowStrength(t);startSnowEffect(n.snowCount,n.snowSize,e,i)}else if(isLightning(t))startLightningEffect(getLightningStrength(t));else if(isCloudy(t)){startCloudEffect(getCloudStrength(t).cloudCount,e,n)}else console.log("No weather effect")}function startRainEffect(t,e,n,i=0,o=-1){console.log(`Rain effect started with ${t} drops, size ${e}, speed ${n}, wind speed ${i} km/h, direction ${o}`);const a=document.getElementById("weather-canvas"),r=a.getContext("2d");a.width=window.innerWidth,a.height=window.innerHeight;const h=.28*i,d=[];for(let i=0;i<t;i++)d.push({x:Math.random()*a.width,y:Math.random()*a.height,length:Math.random()*(1.5*e-.5*e)+.5*e,width:Math.random()*(.3*e-.1*e)+.1*e,speed:Math.random()*(1.5*n-.5*n)+.5*n,opacity:.5*Math.random()+.5,drift:(Math.random()*h+h/2)*o});!function t(){r.clearRect(0,0,a.width,a.height),d.forEach((t=>{r.save(),r.beginPath();const e=r.createLinearGradient(t.x,t.y,t.x,t.y+t.length);e.addColorStop(0,"rgba(173, 216, 230, 0.2)"),e.addColorStop(1,`rgba(173, 216, 230, ${t.opacity})`),r.fillStyle=e;const n=t.x,i=t.y,o=t.x+t.drift,a=t.y+t.length,h=t.width/2;r.moveTo(n,i),r.bezierCurveTo(n-h,i+t.length/3,o-h,a-t.length/3,o,a),r.bezierCurveTo(o+h,a-t.length/3,n+h,i+t.length/3,n,i),r.fill(),r.restore()})),d.forEach((t=>{t.y+=t.speed,t.x+=t.drift,t.y>a.height&&(t.y=-t.length,t.x=Math.random()*a.width),(t.x>a.width||t.x<0)&&(t.x=Math.random()*a.width)})),requestAnimationFrame(t)}()}function startSnowEffect(t,e,n=0,i=-1){console.log(`Snow effect started with ${t} flakes, size ${e}, wind speed ${n} km/h, direction ${i}`);const o=document.getElementById("weather-canvas"),a=o.getContext("2d");o.width=window.innerWidth,o.height=window.innerHeight;const r=.28*n,h=[];for(let n=0;n<t;n++)h.push({x:Math.random()*o.width,y:Math.random()*o.height,radius:Math.random()*(.5*e)+.5*e,speed:1*Math.random()+.5,drift:(Math.random()*r+r/2)*i,angle:Math.random()*Math.PI*2});function d(){a.clearRect(0,0,o.width,o.height),h.forEach((t=>{!function(t,e,n,i){a.save(),a.translate(t,e),a.rotate(i),a.beginPath();for(let t=0;t<6;t++){const e=Math.PI/3*t,i=n*Math.cos(e),o=n*Math.sin(e);a.moveTo(0,0),a.lineTo(i,o);const r=n/3,h=Math.PI/6,d=i-r*Math.cos(e-h),s=o-r*Math.sin(e-h),c=i-r*Math.cos(e+h),u=o-r*Math.sin(e+h);a.moveTo(i,o),a.lineTo(d,s),a.moveTo(i,o),a.lineTo(c,u)}a.strokeStyle="rgba(255, 255, 255, 0.8)",a.lineWidth=1,a.stroke(),a.restore()}(t.x,t.y,t.radius,t.angle)}))}!function t(){d(),h.forEach((t=>{t.y+=t.speed,t.x+=t.drift,t.angle+=.01,t.y>o.height&&(t.y=-t.radius,t.x=Math.random()*o.width),t.x>o.width?t.x=0:t.x<0&&(t.x=o.width)})),requestAnimationFrame(t)}()}function startLightningEffect(t){console.log(`Lightning effect started with frequency: ${t}`);const e=document.getElementById("lightning-canvas"),n=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,function i(){n.clearRect(0,0,e.width,e.height),function(){if(Math.random()>t){n.fillStyle="rgba(255, 255, 255, 0.2)",n.fillRect(0,0,e.width,e.height),n.strokeStyle=`rgba(255, 255, ${200+55*Math.random()}, 0.8)`,n.lineWidth=4*Math.random()+3,n.beginPath();let t=Math.random()*e.width,i=0;for(;i<e.height;){const e=t+(40*Math.random()-20),o=i+15*Math.random();if(n.moveTo(t,i),n.lineTo(e,o),Math.random()>.7){const t=e+(30*Math.random()-15),i=o+15*Math.random();n.moveTo(e,o),n.lineTo(t,i)}t=e,i=o}n.stroke(),setTimeout((()=>{n.clearRect(0,0,e.width,e.height)}),300)}}(),requestAnimationFrame(i)}()}function startCloudEffect(t,e,n){console.log(`Cloud effect started with ${t} clouds, wind speed: ${e} km/h, wind direction: ${n}`);const i=document.getElementById("weather-canvas"),o=i.getContext("2d");i.width=window.innerWidth,i.height=window.innerHeight;const a=.05*e,r=(n+90)*Math.PI/180,h=Math.cos(r),d=Math.sin(r),s=[];for(let e=0;e<t;e++){const t=[],e=200*Math.random()+100,n=50*Math.random()+30;for(let i=0;i<5;i++)t.push({offsetX:Math.random()*e-e/2,offsetY:Math.random()*n-n/2,ellipseWidth:Math.random()*e*.6+.4*e,ellipseHeight:Math.random()*n*.6+.4*n});const o=.6*Math.random()+.4,r=a*o;s.push({x:Math.random()*i.width,y:Math.random()*i.height/2,width:e,height:n,speedX:(.3*Math.random()+.1)*r*h,speedY:(.3*Math.random()+.1)*r*d,shapes:t,opacity:.8*o+.2})}function c(){o.clearRect(0,0,i.width,i.height),s.sort(((t,e)=>t.y-e.y)).forEach((t=>{!function(t){const e=o.createRadialGradient(t.x,t.y,t.height/4,t.x,t.y,t.width);e.addColorStop(0,`rgba(255, 255, 255, ${.8*t.opacity})`),e.addColorStop(1,"rgba(255, 255, 255, 0)"),o.fillStyle=e,t.shapes.forEach((e=>{o.beginPath(),o.ellipse(t.x+e.offsetX,t.y+e.offsetY,e.ellipseWidth,e.ellipseHeight,0,0,2*Math.PI),o.fill()}))}(t)}))}!function t(){c(),s.forEach((t=>{t.x+=t.speedX,t.y+=t.speedY,t.x>i.width+t.width?(t.x=-t.width,t.y=Math.random()*i.height/2):t.x<-t.width&&(t.x=i.width+t.width,t.y=Math.random()*i.height/2),t.y>i.height+t.height?(t.y=-t.height,t.x=Math.random()*i.width):t.y<-t.height&&(t.y=i.height+t.height,t.x=Math.random()*i.width)})),requestAnimationFrame(t)}()}function getWindDirection(t){return t<180?-1:1}function isRain(t){return[51,53,55,56,57,61,63,65,66,67,80,81,82,95,96,99].includes(t)}function isSnow(t){return[71,73,75,77,85,86].includes(t)}function isLightning(t){return[95,96,99].includes(t)}function isCloudy(t){return[1,2,3,45,48].includes(t)}function getRainStrength(t){return{51:{rainCount:100,rainSize:6,rainSpeed:2.5},53:{rainCount:300,rainSize:9,rainSpeed:2.5},55:{rainCount:400,rainSize:12,rainSpeed:2.5},56:{rainCount:100,rainSize:6,rainSpeed:2.5},57:{rainCount:100,rainSize:6,rainSpeed:2.5},61:{rainCount:200,rainSize:20,rainSpeed:3.5},80:{rainCount:200,rainSize:20,rainSpeed:3.5},63:{rainCount:300,rainSize:30,rainSpeed:4},81:{rainCount:300,rainSize:30,rainSpeed:4},65:{rainCount:400,rainSize:40,rainSpeed:5.5},82:{rainCount:400,rainSize:40,rainSpeed:5.5},95:{rainCount:500,rainSize:50,rainSpeed:7},96:{rainCount:550,rainSize:50,rainSpeed:7},99:{rainCount:600,rainSize:50,rainSpeed:7}}[t]||{rainCount:0,rainSize:0,rainSpeed:0}}function getSnowStrength(t){return{71:{snowCount:50,snowSize:3},85:{snowCount:50,snowSize:3},73:{snowCount:70,snowSize:7},75:{snowCount:100,snowSize:10},77:{snowCount:100,snowSize:5},86:{snowCount:50,snowSize:10}}[t]||{snowCount:0,snowSize:0}}function getCloudStrength(t){return{1:{cloudCount:3},45:{cloudCount:3},2:{cloudCount:6},48:{cloudCount:6},3:{cloudCount:10}}[t]||{frequency:1}}function getLightningStrength(t){return{95:{frequency:.998},96:{frequency:.995},99:{frequency:.99}}[t]||{frequency:1}}window.addEventListener("resize",(()=>{const t=document.getElementById("weather-canvas");t.width=window.innerWidth,t.height=window.innerHeight}));